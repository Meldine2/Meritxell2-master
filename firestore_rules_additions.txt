// MoneyDonation collection - missing from your current rules
match /MoneyDonation/{donationId} {
  allow read, write: if request.auth != null; // Anyone authenticated can read/write
}

// Matching preferences collection (if not already covered above)
match /matching_preferences/{document=**} {
  allow read, write: if request.auth != null;
}

// History collections - Users can read their own data, admins can read all
match /adoption_history/{document=**} {
  allow read: if request.auth != null && 
    (resource.data.userId == request.auth.uid || 
     isAdmin());
  allow write: if isAdmin(); // Only admins can write to history
}

match /donation_history/{document=**} {
  allow read: if request.auth != null && 
    (resource.data.userId == request.auth.uid || 
     isAdmin());
  allow write: if isAdmin(); // Only admins can write to history
}

match /matching_history/{document=**} {
  allow read: if request.auth != null && 
    (resource.data.userID == request.auth.uid || 
     resource.data.userId == request.auth.uid ||
     isAdmin());
  allow write: if isAdmin(); // Only admins can write to history
}

match /appointment_history/{document=**} {
  allow read: if request.auth != null && 
    (resource.data.userId == request.auth.uid || 
     isAdmin());
  allow write: if isAdmin(); // Only admins can write to history
}

// Notification logs (for debugging)
match /notification_logs/{document=**} {
  allow read, write: if request.auth != null;
} 